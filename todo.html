<!DOCTYPE html>

<html lang="en">

<head>
    <title>My todo app</title>
</head>

<body>
    <input id="todo-title" type="text" />
    <input id="date-picker" type="date"/>

    <button onclick="addTodo()">Add Todo</button>

    <div id="todo_list"></div>

    <script>


        let todos = [];

        function render() {
            document.getElementById("todo_list").innerHTML = ' ';

            todos.forEach(function(todo) {
                const element = document.createElement("div");
                element.innerText = todo.title + ' ' + todo.dueDate;

                const deleteButton = document.createElement('button');
                deleteButton.innerText = "Delete"
                deleteButton.style = 'margin-left: 12px';

                deleteButton.onclick = deleteTodo;
                deleteButton.id = todo.id;

                element.appendChild(deleteButton);

                const todoList = document.getElementById("todo_list");
                todoList.appendChild(element);
            });
        }
        function deleteTodo(event) {
            const deleteButton = event.target;
            const idToDelete = deleteButton.id;

            todos = todos.filter(function (todo) {
                if (todo.id === idToDelete) {
                    return false;
                } else {
                    return true
                }
            });

            render();
        }


        function addTodo() {
            const text_box = document.getElementById("todo-title");
            const title = text_box.value;

            const datePicker = document.getElementById("date-picker");
            const dueDate = datePicker.value;

            const id = (new Date().getTime()).toString();

            todos.push({
                title: title,
                dueDate: dueDate,
                id: id
            });

            render();
        }
    </script>
</body>

</html>